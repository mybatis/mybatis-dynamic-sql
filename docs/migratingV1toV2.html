<!DOCTYPE html>


<!--
 | Generated by Apache Maven Doxia Site Renderer 2.0.0 from src/site/markdown/docs/migratingV1toV2.md at 06 Jul 2025
 | Rendered using Apache Maven Fluido Skin 2.1.0
-->
<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="generator" content="Apache Maven Doxia Site Renderer 2.0.0" />
    <title>V1 to V2 Migration Guide – MyBatis Dynamic SQL</title>
    <link rel="stylesheet" href="../css/apache-maven-fluido-2.1.0.min.css" />
    <link rel="stylesheet" href="../css/site.css" />
    <link rel="stylesheet" href="../css/print.css" media="print" />
    <script src="../js/apache-maven-fluido-2.1.0.min.js"></script>
  </head>
  <body>
    <div class="container-fluid container-fluid-top">
      <header>
        <div id="banner">
          <div class="pull-left"><div id="bannerLeft"><h1><a href="../docs/introduction.html">MyBatis Dynamic SQL</a></h1></div></div>
          <div class="pull-right"><div id="bannerRight"><h1><a href="http://www.mybatis.org/"><img src="https://mybatis.org/images/mybatis-logo.png" alt="MyBatis logo" /> MyBatis</a></h1></div></div>
          <div class="clear"><hr/></div>
        </div>

        <div id="breadcrumbs">
          <ul class="breadcrumb">
        <li id="publishDate">Last Published: 03 Jun 2024<span class="divider">|</span>
</li>
          <li id="projectVersion">Version: 2.0.0-SNAPSHOT</li>
          </ul>
        </div>
      </header>
      <div class="row-fluid">
        <header id="leftColumn" class="span2">
          <nav class="well sidebar-nav">
  <ul class="nav nav-list">
   <li class="nav-header">User&apos;s Guide</li>
    <li><a href="../docs/introduction.html">Introduction</a></li>
    <li><a href="../docs/CHANGELOG.html">Change Log</a></li>
    <li class="active"><a>Migrating from V1 to V2</a></li>
    <li><a href="../docs/quickStart.html">Quick Start</a></li>
    <li><a href="../docs/exceptions.html">Exceptions thrown by the Library</a></li>
    <li><a href="../docs/configuration.html">Configuration of the Library</a></li>
    <li><a href="../docs/databaseObjects.html">Modeling Database Objects</a></li>
    <li><a href="../docs/whereClauses.html"><span class="icon-chevron-down"></span>WHERE Clause Support</a>
     <ul class="nav nav-list">
      <li><a href="../docs/conditions.html">WHERE Conditions</a></li>
     </ul></li>
    <li><a href="../docs/select.html"><span class="icon-chevron-down"></span>SELECT Statements</a>
     <ul class="nav nav-list">
      <li><a href="../docs/caseExpressions.html">Case Expressions</a></li>
      <li><a href="../docs/complexQueries.html">Complex Queries</a></li>
     </ul></li>
    <li><a href="../docs/delete.html">DELETE Statements</a></li>
    <li><a href="../docs/insert.html">INSERT Statements</a></li>
    <li><a href="../docs/update.html">UPDATE Statements</a></li>
    <li><a href="../docs/subQueries.html">SubQuery Support</a></li>
    <li><a href="../docs/functions.html">Database Functions</a></li>
    <li><a href="../docs/mybatis3.html">MyBatis3 Support</a></li>
    <li><a href="../docs/spring.html">Spring Support</a></li>
    <li><a href="../docs/springBatch.html">Spring Batch Support</a></li>
    <li><a href="../docs/kotlinOverview.html"><span class="icon-chevron-right"></span>Kotlin Support</a></li>
    <li><a href="../docs/howItWorks.html">How it Works</a></li>
    <li><a href="../docs/extending.html">Extending the Library</a></li>
    <li><a href="../docs/codingStandards.html">Coding Standards</a></li>
    <li><a href="../docs/motivation.html">Motivation</a></li>
   <li class="nav-header">Project Documentation</li>
    <li><a href="../project-info.html"><span class="icon-chevron-right"></span>Project Information</a></li>
    <li><a href="../project-reports.html"><span class="icon-chevron-right"></span>Project Reports</a></li>
  </ul>
          </nav>
          <div class="well sidebar-nav">
            <div id="poweredBy">
              <div class="clear"></div>
              <div class="clear"></div>
<a href="https://maven.apache.org/" class="builtBy" target="_blank"><img class="builtBy" alt="Built by Maven" src="../images/logos/maven-feather.png" /></a>
            </div>
          </div>
        </header>
        <main id="bodyColumn" class="span10">
<section><a id="V1_to_V2_Migration_Guide"></a>
<h1>V1 to V2 Migration Guide</h1>
<p>Version 2 of MyBatis Dynamic SQL introduced many new features. On this page we will provide examples for the more
significant changes - changes that are more substantial than following deprecation messages.</p><section><a id="Kotlin_Join_Syntax"></a>
<h2>Kotlin Join Syntax</h2>
<p>The Java DSL for joins was changed to allow much more flexible joins. Of course, not all capabilities are supported in
all databases, but you should now be able to code most joins specification that are supported by your database.
The changes in the Java DSL are mostly internal and should not impact most users. The <code>equalTo</code> methods has been
deprecated in favor of <code>isEqualTo</code>, but all other changes should be hidden.</p>
<p>Like the Java DSL, the V2 Kotlin DSL offers a fully flexible join specification and allows for much more flexible join
specifications. The changes in the Kotlin DSL allow a more natural expressions of a join specification. The main
difference is that the &#x201c;on&#x201d; keyword should be moved outside the join specification lambda (it is now an infix function).
Inside the lambda, the conditions should be rewritten to match the syntax of a where clause.</p>
<p>V1 (Deprecated) Join Specification Example:</p>

<pre class="prettyprint"><code class="language-kotlin">val selectStatement = select(
    orderMaster.orderId, orderMaster.orderDate,
    orderDetail.lineNumber, orderDetail.description, orderDetail.quantity
) {
    from(orderMaster, &quot;om&quot;)
    join(orderDetail, &quot;od&quot;) {
        on(orderMaster.orderId) equalTo orderDetail.orderId
        and(orderMaster.orderId) equalTo constant(&quot;1&quot;)
    }
}
</code></pre>
<p>V2 Join Specification Example:</p>

<pre class="prettyprint"><code class="language-kotlin">val selectStatement = select(
    orderMaster.orderId, orderMaster.orderDate,
    orderDetail.lineNumber, orderDetail.description, orderDetail.quantity
) {
    from(orderMaster, &quot;om&quot;)
    join(orderDetail, &quot;od&quot;) on {
        orderMaster.orderId isEqualTo orderDetail.orderId
        and { orderMaster.orderId isEqualTo constant(&quot;1&quot;) }
    }
}
</code></pre>
<p>Notice that the &#x201c;on&#x201d; keyword has been moved outside the lambda, and the conditions are coded with the same syntax used
by WHERE, HAVING, and CASE expressions.</p>
<p>The prior syntax is deprecated and will be removed in a future release.</p></section></section>        </main>
      </div>
    </div>
    <hr/>
    <footer>
      <div class="container-fluid">
        <div class="row-fluid">
            <p>©      2016–2025
<a href="https://www.mybatis.org/">MyBatis.org</a>
</p>
        </div>
      </div>
    </footer>
  </body>
</html>
