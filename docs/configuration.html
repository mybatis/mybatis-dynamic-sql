<!DOCTYPE html>


<!--
 | Generated by Apache Maven Doxia Site Renderer 2.0.0 from src/site/markdown/docs/configuration.md at 27 May 2025
 | Rendered using Apache Maven Fluido Skin 2.1.0
-->
<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="generator" content="Apache Maven Doxia Site Renderer 2.0.0" />
    <title>Configuration of the Library – MyBatis Dynamic SQL</title>
    <link rel="stylesheet" href="../css/apache-maven-fluido-2.1.0.min.css" />
    <link rel="stylesheet" href="../css/site.css" />
    <link rel="stylesheet" href="../css/print.css" media="print" />
    <script src="../js/apache-maven-fluido-2.1.0.min.js"></script>
  </head>
  <body>
    <div class="container-fluid container-fluid-top">
      <header>
        <div id="banner">
          <div class="pull-left"><div id="bannerLeft"><h1><a href="../docs/introduction.html">MyBatis Dynamic SQL</a></h1></div></div>
          <div class="pull-right"><div id="bannerRight"><h1><a href="http://www.mybatis.org/"><img src="https://mybatis.org/images/mybatis-logo.png" alt="MyBatis logo" /> MyBatis</a></h1></div></div>
          <div class="clear"><hr/></div>
        </div>

        <div id="breadcrumbs">
          <ul class="breadcrumb">
        <li id="publishDate">Last Published: 03 Jun 2024<span class="divider">|</span>
</li>
          <li id="projectVersion">Version: 2.0.0-SNAPSHOT</li>
          </ul>
        </div>
      </header>
      <div class="row-fluid">
        <header id="leftColumn" class="span2">
          <nav class="well sidebar-nav">
  <ul class="nav nav-list">
   <li class="nav-header">User&apos;s Guide</li>
    <li><a href="../docs/introduction.html">Introduction</a></li>
    <li><a href="../docs/CHANGELOG.html">Change Log</a></li>
    <li><a href="../docs/migratingV1toV2.html">Migrating from V1 to V2</a></li>
    <li><a href="../docs/quickStart.html">Quick Start</a></li>
    <li><a href="../docs/exceptions.html">Exceptions thrown by the Library</a></li>
    <li class="active"><a>Configuration of the Library</a></li>
    <li><a href="../docs/databaseObjects.html">Modeling Database Objects</a></li>
    <li><a href="../docs/whereClauses.html"><span class="icon-chevron-down"></span>WHERE Clause Support</a>
     <ul class="nav nav-list">
      <li><a href="../docs/conditions.html">WHERE Conditions</a></li>
     </ul></li>
    <li><a href="../docs/select.html"><span class="icon-chevron-down"></span>SELECT Statements</a>
     <ul class="nav nav-list">
      <li><a href="../docs/caseExpressions.html">Case Expressions</a></li>
      <li><a href="../docs/complexQueries.html">Complex Queries</a></li>
     </ul></li>
    <li><a href="../docs/delete.html">DELETE Statements</a></li>
    <li><a href="../docs/insert.html">INSERT Statements</a></li>
    <li><a href="../docs/update.html">UPDATE Statements</a></li>
    <li><a href="../docs/subQueries.html">SubQuery Support</a></li>
    <li><a href="../docs/functions.html">Database Functions</a></li>
    <li><a href="../docs/mybatis3.html">MyBatis3 Support</a></li>
    <li><a href="../docs/spring.html">Spring Support</a></li>
    <li><a href="../docs/springBatch.html">Spring Batch Support</a></li>
    <li><a href="../docs/kotlinOverview.html"><span class="icon-chevron-right"></span>Kotlin Support</a></li>
    <li><a href="../docs/howItWorks.html">How it Works</a></li>
    <li><a href="../docs/extending.html">Extending the Library</a></li>
    <li><a href="../docs/codingStandards.html">Coding Standards</a></li>
    <li><a href="../docs/motivation.html">Motivation</a></li>
   <li class="nav-header">Project Documentation</li>
    <li><a href="../project-info.html"><span class="icon-chevron-right"></span>Project Information</a></li>
    <li><a href="../project-reports.html"><span class="icon-chevron-right"></span>Project Reports</a></li>
  </ul>
          </nav>
          <div class="well sidebar-nav">
            <div id="poweredBy">
              <div class="clear"></div>
              <div class="clear"></div>
<a href="https://maven.apache.org/" class="builtBy" target="_blank"><img class="builtBy" alt="Built by Maven" src="../images/logos/maven-feather.png" /></a>
            </div>
          </div>
        </header>
        <main id="bodyColumn" class="span10">
<section><a id="Configuration_of_the_Library"></a>
<h1>Configuration of the Library</h1>
<p>This page will detail the behaviors of MyBatis Dynamic SQL that can be modified.
Configuration is available with version 1.4.1 and later of the library.</p>
<p>The library can be configured globally - which will change the behavior for all statements - or each individual statement
can be configured. There are sensible defaults for all configuration values, so configuration is not strictly necessary.
If you want to change any of the default behaviors of the library, then the information on this page will help.</p><section><a id="Global_Configuration"></a>
<h2>Global Configuration</h2>
<p>On first use the library will initialize the global configuration. The global configuration can be specified via a property
file named <code>mybatis-dynamic-sql.properties</code> in the root of the classpath. If you wish to use a different file name,
you can specify the file name as a JVM property named <code>mybatis-dynamic-sql.configurationFile</code>. Note that the global
configuration is created one time and shared for every statement in the same JVM.</p>
<p>The configuration file is a standard Java properties file. The possible values are detailed in the next section.</p></section><section><a id="Global_Configuration_Properties"></a>
<h2>Global Configuration Properties</h2>
<table class="table table-striped">
<thead>
<tr class="a">
<th>Property</th>
<th>Default</th>
<th>Available in Version</th>
<th>Meaning</th></tr></thead><tbody>
<tr class="b">
<td>nonRenderingWhereClauseAllowed</td>
<td>false</td>
<td>1.4.1+</td>
<td>If a where clause is specified, but fails to render, then the library will throw a <code>NonRenderingWhereClauseException</code> by default. If you set this value to true, then no exception will be thrown. This could enable statements to be rendered without where clauses that affect all rows in a table.</td></tr></tbody>
</table>
</section><section><a id="Statement_Configuration"></a>
<h2>Statement Configuration</h2>
<p>If the global configuration is not acceptable for any individual statement, you can also configure the statement in the
DSL. Consider the following statement:</p>

<pre class="prettyprint"><code class="language-java">DeleteStatementProvider deleteStatement = deleteFrom(animalData)
    .where(id, isIn(null, 22, null).filter(Objects::nonNull).filter(i -&gt; i != 22))
    .configureStatement(c -&gt; c.setNonRenderingWhereClauseAllowed(true))
    .build()
    .render(RenderingStrategies.MYBATIS3);
</code></pre>
<p>In this case, the <code>isIn</code> condition has filters that will remove all values from the condition. In that case, the
condition will not render and, subsequently, the where clause will not render. This means that the generated delete
statement would delete all rows in the table. By default, the global configuration will block this statement from
rendering and throw a <code>NonRenderingWhereClauseException</code>. If for some reason you would like to allow a statement
like this to be rendered, then you can allow it as shown above with the <code>configureStatement</code> method.</p>
<p>The Kotlin DSL contains the same function:</p>

<pre class="prettyprint"><code class="language-kotlin">val deleteStatement = deleteFrom(person) {
    where { id isEqualToWhenPresent null }
    configureStatement { isNonRenderingWhereClauseAllowed = true }
}
</code></pre></section><section><a id="Configuration_Scope_with_Select_Statements"></a>
<h2>Configuration Scope with Select Statements</h2>
<p>Select statements can stand alone, or they can be embedded within other statements. For example, the library supports
writing insert statements with an embedded select, or select statements that contain other select statements for sub
queries. The select DSLs (both Java and Kotlin) appear to allow you to specify statement configuration on embedded
select statements, but this is not supported in point of fact. Statement configuration must ALWAYS be specified on the
outermost statement. Any configuration specified on embedded select statements will be ignored. We realize this could be
confusing! But we've made this decision hoping to minimize code duplication and maximize consistency.</p>
<p>So the best practice is to ALWAYS specify the statement configuration as the LAST call to the DSL before calling
<code>build</code>, or before ending a Kotlin lambda.</p>
<p>The following Kotlin code snippet shows this in action&#x2026;</p>

<pre class="prettyprint"><code class="language-kotlin">val insertStatement = insertSelect {
    into(person)
    select(id, firstName, lastName, birthDate, employed, occupation, addressId) {
        from(person)
        where { id isGreaterThanOrEqualToWhenPresent null }
        // the following will be ignored in favor of the enclosing statement configuration...
        configureStatement { isNonRenderingWhereClauseAllowed = false }
    }
    configureStatement { isNonRenderingWhereClauseAllowed = true }
}
</code></pre>
<p>The inner <code>configureStatement</code> call will be ignored in this case, only the <code>configureStatement</code> call scoped to the
insert statement itself will be in effect.</p></section></section>        </main>
      </div>
    </div>
    <hr/>
    <footer>
      <div class="container-fluid">
        <div class="row-fluid">
            <p>©      2016–2025
<a href="https://www.mybatis.org/">MyBatis.org</a>
</p>
        </div>
      </div>
    </footer>
  </body>
</html>
