<!DOCTYPE html>


<!--
 | Generated by Apache Maven Doxia Site Renderer 1.11.1 from src/site/markdown/docs/exceptions.md at 07 October 2022
 | Rendered using Apache Maven Fluido Skin 1.11.1
-->
<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="generator" content="Apache Maven Doxia Site Renderer 1.11.1" />
    <title>MyBatis Dynamic SQL &#x2013; Exceptions Thrown by the Library</title>
    <link rel="stylesheet" href="../css/apache-maven-fluido-1.11.1.min.css" />
    <link rel="stylesheet" href="../css/site.css" />
    <link rel="stylesheet" href="../css/print.css" media="print" />
    <script src="../js/apache-maven-fluido-1.11.1.min.js"></script>
  </head>
  <body class="topBarDisabled">
    <div class="container-fluid">
      <header>
        <div id="banner">
          <div class="pull-left"><a href="../docs/introduction.html" id="bannerLeft"><h1>MyBatis Dynamic SQL</h1>
</a></div>
          <div class="pull-right"><a href="http://www.mybatis.org/" id="bannerRight" title="MyBatis logo"><img src="https://mybatis.org/images/mybatis-logo.png"  alt="MyBatis logo" style="" /></a></div>
          <div class="clear"><hr/></div>
        </div>

        <div id="breadcrumbs">
          <ul class="breadcrumb">
        <li id="publishDate">Last Published: 07 October 2022<span class="divider">|</span>
</li>
          <li id="projectVersion">Version: 1.4.1</li>
          </ul>
        </div>
      </header>
      <div class="row-fluid">
        <header id="leftColumn" class="span2">
          <nav class="well sidebar-nav">
  <ul class="nav nav-list">
   <li class="nav-header">User's Guide</li>
    <li><a href="../docs/introduction.html" title="Introduction"><span class="none"></span>Introduction</a></li>
    <li><a href="../docs/CHANGELOG.html" title="Change Log"><span class="none"></span>Change Log</a></li>
    <li><a href="../docs/quickStart.html" title="Quick Start"><span class="none"></span>Quick Start</a></li>
    <li class="active"><a><span class="none"></span>Exceptions thrown by the Library</a></li>
    <li><a href="../docs/configuration.html" title="Configuration of the Library"><span class="none"></span>Configuration of the Library</a></li>
    <li><a href="../docs/databaseObjects.html" title="Modeling Database Objects"><span class="none"></span>Modeling Database Objects</a></li>
    <li><a href="../docs/whereClauses.html" title="WHERE Clause Support"><span class="icon-chevron-down"></span>WHERE Clause Support</a>
     <ul class="nav nav-list">
      <li><a href="../docs/conditions.html" title="WHERE Conditions"><span class="none"></span>WHERE Conditions</a></li>
     </ul></li>
    <li><a href="../docs/select.html" title="SELECT Statements"><span class="icon-chevron-down"></span>SELECT Statements</a>
     <ul class="nav nav-list">
      <li><a href="../docs/complexQueries.html" title="Complex Queries"><span class="none"></span>Complex Queries</a></li>
     </ul></li>
    <li><a href="../docs/delete.html" title="DELETE Statements"><span class="none"></span>DELETE Statements</a></li>
    <li><a href="../docs/insert.html" title="INSERT Statements"><span class="none"></span>INSERT Statements</a></li>
    <li><a href="../docs/update.html" title="UPDATE Statements"><span class="none"></span>UPDATE Statements</a></li>
    <li><a href="../docs/subQueries.html" title="SubQuery Support"><span class="none"></span>SubQuery Support</a></li>
    <li><a href="../docs/functions.html" title="Database Functions"><span class="none"></span>Database Functions</a></li>
    <li><a href="../docs/mybatis3.html" title="MyBatis3 Support"><span class="none"></span>MyBatis3 Support</a></li>
    <li><a href="../docs/spring.html" title="Spring Support"><span class="none"></span>Spring Support</a></li>
    <li><a href="../docs/springBatch.html" title="Spring Batch Support"><span class="none"></span>Spring Batch Support</a></li>
    <li><a href="../docs/kotlinOverview.html" title="Kotlin Support"><span class="icon-chevron-right"></span>Kotlin Support</a></li>
    <li><a href="../docs/howItWorks.html" title="How it Works"><span class="none"></span>How it Works</a></li>
    <li><a href="../docs/extending.html" title="Extending the Library"><span class="none"></span>Extending the Library</a></li>
    <li><a href="../docs/codingStandards.html" title="Coding Standards"><span class="none"></span>Coding Standards</a></li>
    <li><a href="../docs/motivation.html" title="Motivation"><span class="none"></span>Motivation</a></li>
   <li class="nav-header">Project Documentation</li>
    <li><a href="../project-info.html" title="Project Information"><span class="icon-chevron-right"></span>Project Information</a></li>
    <li><a href="../project-reports.html" title="Project Reports"><span class="icon-chevron-right"></span>Project Reports</a></li>
  </ul>
          </nav>
          <div class="well sidebar-nav">
            <div id="poweredBy">
              <div class="clear"></div>
              <div class="clear"></div>
              <div class="clear"></div>
<a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy"><img class="builtBy" alt="Built by Maven" src="../images/logos/maven-feather.png" /></a>
            </div>
          </div>
        </header>
        <main id="bodyColumn"  class="span10" >
<h1>Exceptions Thrown by the Library</h1>
<p>The library will throw runtime exceptions in a variety of cases - most often when invalid SQL is detected.</p>
<p>All exceptions are derived from <code>org.mybatis.dynamic.sql.exception.DynamicSqlException</code> which is, in turn,
derived from <code>java.lang.RuntimeException</code>.</p>
<p>The most important exceptions to think about are <code>InvalidSQLException</code> and <code>NonRenderingWhereClauseException</code>. We
provide details about those exceptions below.</p><section>
<h2><a name="Invalid_SQL_Detection"></a>Invalid SQL Detection</h2>
<p>The library makes an effort to prevent the generation of invalid SQL. If invalid SQL is detected, the library will
throw <code>InvalidSQLException</code> or one of it's derived exceptions. Invalid SQL can happen in different ways:</p>
<ol style="list-style-type: decimal">

<li>Misuse of the DSL. For example, the DSL allows you to build an update statement with no &#x201c;set&#x201d; clauses.
Even though technically allowed by the DSL, this would produce invalid SQL.</li>
<li>Misuse of the Kotlin DSL. The Kotlin DSL provides a lot of flexibility for building statements and looks very close
to native SQL, but that flexibility can be misused. For example, the Kotlin DSL would allow you to write an insert
statement without an &#x201c;into&#x201d; clause.</li>
<li>More common is a case when using the optional mappings in an insert or update statement. It is possible
that all mappings would fail to render which would produce invalid SQL. For example, in a general insert statement
you could specify many &#x201c;set column to value when present&#x201d; mappings that all had null values. All mappings would fail
to render in that case which would cause invalid SQL.</li>
</ol>
<p>All of these exceptions can be avoided through proper use of the DSL and validation of input values.</p></section><section>
<h2><a name="Non_Rendering_Where_Clauses"></a>Non Rendering Where Clauses</h2>
<p>Most conditions in a where clause provide optionality - they have <code>filter</code> methods that can cause the condition to be
dropped from the where clause. If all the conditions in a where clause fail to render, then the where clause itself is
dropped from the rendered SQL. This can be dangerous in that it can cause a statement to be generated that affects all
rows in a table. For example, all rows could be deleted. As of version 1.4.1, the library will throw a
<code>NonRenderingWhereClauseException</code> in this case out of an abundance of caution. This behavior can be overridden
through either global configuration, or by configuring individual statements to allow for where clauses to be dropped.</p>
<p>The important idea is that there are legitimate cases when it is reasonable to allow a where clause to not render, but
the decision to allow that should be very intentional. See the &#x201c;Configuration of the Library&#x201d; page for further details.</p>
<p>The exception will only be thrown if a where clause is coded but fails to render. If you do not code a where clause in
a statement, then we assume that you intend for all rows to be affected.</p></section><section>
<h2><a name="Exception_Details"></a>Exception Details</h2>
<p>Details of the different exceptions follows:</p>
<table border="0" class="table table-striped">
<thead>

<tr class="a">
<th>Exception</th>
<th>Causes</th></tr>
</thead><tbody>

<tr class="b">
<td align="left"><code>org.mybatis.dynamic.sql.exception.DuplicateTableAliasException</code></td>
<td>Thrown if you attempt to join more than one table with the same alias in a select statement</td></tr>
<tr class="a">
<td align="left"><code>org.mybatis.dynamic.sql.exception.DynamicSQLException</code></td>
<td>Thrown when other more specific exceptions are not appropriate. One example is when reading a configuration property file causes an IOException. This is a rare occurrence.</td></tr>
<tr class="b">
<td align="left"><code>org.mybatis.dynamic.sql.exception.InvalidSQLException</code></td>
<td>Thrown if invalid SQL is detected. The most common causes are when all the optional column mappings in an insert or update statement fail to render.</td></tr>
<tr class="a">
<td align="left"><code>org.mybatis.dynamic.sql.exception.NonRenderingWhereClauseException</code></td>
<td>Thrown if all conditions in a where clause fail to render - which will cause the where clause to be dropped from the rendered SQL. This could cause a statement to inadvertently affect all rows in a table. This behavior can be changed with global or statement configuration.</td></tr>
<tr class="b">
<td align="left"><code>org.mybatis.dynamic.sql.util.kotlin.KInvalidSqlException</code></td>
<td>Thrown if invalid SQL is detected when using the Kotlin DSL. This exception is for specific misuses of the Kotlin DSL. It is derived from <code>InvalidSQLException</code> which can also occur when using the Kotlin DSL.</td></tr>
</tbody>
</table></section>
        </main>
      </div>
    </div>
    <hr/>
    <footer>
      <div class="container-fluid">
        <div class="row-fluid">
            <p>&#169;      2016&#x2013;2022
<a href="https://www.mybatis.org/">MyBatis.org</a>
</p>
        </div>
      </div>
    </footer>
<script>
	if(anchors) {
	  anchors.add();
	}
</script>
  </body>
</html>
